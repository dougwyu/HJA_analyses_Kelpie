c g c
}
>>
\\layout {
line-width=4\\cm indent=1\\cm
}
")
main2 <- cat("
\\markup{\"1\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore }}
\\markup{\"2\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore}}
\\markup{\"3\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore}}
\\markup{\"4\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore}}
")
main2 <- "
\\markup{\"1\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore }}
\\markup{\"2\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore}}
\\markup{\"3\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore}}
\\markup{\"4\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore}}
"
main1 <- "
% LilyBin
\\version \"2.18.2\"
\\paper {
system-system-spacing = #'((padding . 20))
}
smallScore = \\markup{
\\score{
\\transpose c f
\\new StaffGroup <<
\\new Staff \\new Voice = melody {
\\time 3/4
\\key c \\major
<c' e' g'>
<g' b' d''>
<c' e' g'>  \bar \"|.\"
}
\\new Lyrics \\lyricsto melody { I V I }
\\new Staff {
\\key c \\major
\\clef bass
\\relative c
c g c
}
>>
\\layout {
line-width=4\\cm indent=1\\cm
}
"
writeLines(cat(main1, main2), "J:/Documents_CD/Tom/Cadences/output.ly")
cat(main1, main2)
writeLines(c(main1, main2), "J:/Documents_CD/Tom/Cadences/output.ly")
main1 <- "
% LilyBin
\\version \"2.18.2\"
\\paper {
system-system-spacing = #'((padding . 20))
}
smallScore = \\markup{
\\score{
\\transpose c f
\\new StaffGroup <<
\\new Staff \\new Voice = melody {
\\time 3/4
\\key c \\major
<c' e' g'>
<g' b' d''>
<c' e' g'>  \\bar \"|.\"
}
\\new Lyrics \\lyricsto melody { I V I }
\\new Staff {
\\key c \\major
\\clef bass
\\relative c
c g c
}
>>
\\layout {
line-width=4\\cm indent=1\\cm
}
"
main2 <- "
\\markup{\"1\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore }}
\\markup{\"2\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore}}
\\markup{\"3\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore}}
\\markup{\"4\"\\line{\\null}}
\\markup{\\concat { \\smallScore \\smallScore \\smallScore \\smallScore}}
"
writeLines(c(main1, main2), "J:/Documents_CD/Tom/Cadences/output.ly")
scores <- paste0("smallScore", LETTERS[1:12])
structure(chords)
main1 <- paste0("
% LilyBin
\\version \"2.18.2\"
\\paper {
system-system-spacing = #'((padding . 20))
}
smallScore = \\markup{
\\score{
\\transpose c f
\\new StaffGroup <<
\\new Staff \\new Voice = melody {
\\time 3/4
\\key c \\major
<c' e' g'>
<g' b' d''>
<c' e' g'>  \\bar \"|.\"
}
\\new Lyrics \\lyricsto melody { I V I }
\\new Staff {
\\key c \\major
\\clef bass
\\relative c
c g c
}
>>
\\layout {
line-width=4\\cm indent=1\\cm
}
")
writeLines(c(main1, main2), "J:/Documents_CD/Tom/Cadences/output.ly")
chords
library(dplyr)
allCadences <- cadences %>%
tidyr::pivot_wider(id_cols = nChord)
allCadences
allCadences <- cadences %>%
tidyr::pivot_wider(names_from = nChord)
allCadences
allCadences <- cadences %>%
tidyr::pivot_wider(names_from = nChord, values_from = c(cadence, nmChord))
split(cadences, cadence)
split(cadences, cadences$cadence)
tmp <- split(cadences, cadences$cadence)[[1]]
tmp
split(tmp, tmp$nChord)
expand.grid(split(tmp, tmp$nChord) )
expand.grid(split(tmp$nmChord, tmp$nChord))
lapply(split(cadences, cadences$cadence), function(x) expand.grid(split(x$nmChord, x$nChord)))
stack(lapply(split(cadences, cadences$cadence), function(x) expand.grid(split(x$nmChord, x$nChord))))
tmp <- lapply(split(cadences, cadences$cadence), function(x) expand.grid(split(x$nmChord, x$nChord)))
names(tmp)
lengths(tmp)
sapply(tmp, nrow)
rep(names(tmp), each = sapply(tmp, nrow))
rep(names(tmp), sapply(tmp, nrow))
allCadences <- data.frame(cadence = rep(names(tmp), sapply(tmp, nrow)), do.call(rbind, tmp))
head(allCadences)
rownames(allCadences) <- NULL
head(allCadences)
chords
allCadences$note1 <- chords$notes[match(allCadences$X1, chords$nmChord)]
head(allCadences)
allCadences$note2 <- chords$notes[match(allCadences$X2, chords$nmChord)]
allCadences$note3 <- chords$notes[match(allCadences$X3, chords$nmChord)]
head(allCadences)
allCadences$bass1 <- chords$bass[match(allCadences$X1, chords$bass)]
allCadences$bass2 <- chords$bass[match(allCadences$X2, chords$bass)]
allCadences$bass3 <- chords$bass[match(allCadences$X3, chords$bass)]
head(allCadences)
allCadences$bass1 <- chords$bass[match(allCadences$X1, chords$nmChord)]
allCadences$bass2 <- chords$bass[match(allCadences$X2, chords$nmChord)]
allCadences$bass3 <- chords$bass[match(allCadences$X3, chords$nmChord)]
head(allCadences)
allCadences <- data.frame(cadence = rep(names(tmp), sapply(tmp, nrow)), do.call(rbind, tmp))
rownames(allCadences) <- NULL
allCadences$notes1 <- chords$notes[match(allCadences$X1, chords$nmChord)]
allCadences$notes2 <- chords$notes[match(allCadences$X2, chords$nmChord)]
allCadences$notes3 <- chords$notes[match(allCadences$X3, chords$nmChord)]
allCadences$bass1 <- chords$bass[match(allCadences$X1, chords$nmChord)]
allCadences$bass2 <- chords$bass[match(allCadences$X2, chords$nmChord)]
allCadences$bass3 <- chords$bass[match(allCadences$X3, chords$nmChord)]
head(allCadences)
set.seed(999)
set <- allCadences[sample(1:nrow(allCadences), size = length(scores)),]
set
set$key <- keys[sample(1:length(keys), size = length(scores))]
keys <- c("d", "e", "f", "g", "a", "b", "des", "ees", "aes", "bes", "dis", "fis", "gis")
set$key <- keys[sample(1:length(keys), size = length(scores))]
head(key)
head(set)
paste("a", 1:2, "b", 3:4)
names(set) <- scores
set$score <- scores
head(set)
main1 <- paste("
% LilyBin
\\version \"2.18.2\"
\\paper {
system-system-spacing = #'((padding . 20))
}
", set$score, "= \\markup{
\\score{
\\transpose c", set$key, "
\\new StaffGroup <<
\\new Staff \\new Voice = melody {
\\time 3/4
\\key c \\major
<", set$notes1,">
<", set$notes2,">
<", set$notes3,">  \\bar \"|.\"
}
\\new Lyrics \\lyricsto melody { ", set$X1, set$X2, set$X3, " }
\\new Staff {
\\key c \\major
\\clef bass
\\relative c
",set$bass1, set$bass2, set$bass3,"
}
>>
\\layout {
line-width=4\\cm indent=1\\cm
}
")
smallScore <- paste(set$score, "= \\markup{
\\score{
\\transpose c", set$key, "
\\new StaffGroup <<
\\new Staff \\new Voice = melody {
\\time 3/4
\\key c \\major
<", set$notes1,">
<", set$notes2,">
<", set$notes3,">  \\bar \"|.\"
}
\\new Lyrics \\lyricsto melody { ", set$X1, set$X2, set$X3, " }
\\new Staff {
\\key c \\major
\\clef bass
\\relative c
",set$bass1, set$bass2, set$bass3,"
}")
main1 <- paste("
% LilyBin
\\version \"2.18.2\"
\\paper {
system-system-spacing = #'((padding . 20))
}
", smallScore, "
>>
\\layout {
line-width=4\\cm indent=1\\cm
}
")
writeLines(c(main1, main2), "J:/Documents_CD/Tom/Cadences/output.ly")
smallScore <- paste(set$score, "= \\markup{
\\score{
\\transpose c", set$key, "
\\new StaffGroup <<
\\new Staff \\new Voice = melody {
\\time 3/4
\\key c \\major
<", set$notes1,">
<", set$notes2,">
<", set$notes3,">  \\bar \"|.\"
}
\\new Lyrics \\lyricsto melody { ", set$X1, set$X2, set$X3, " }
\\new Staff {
\\key c \\major
\\clef bass
\\relative c
",set$bass1, set$bass2, set$bass3,"
}", collapse = "\n")
smallScore <- paste(paste(set$score, "= \\markup{
\\score{
\\transpose c", set$key, "
\\new StaffGroup <<
\\new Staff \\new Voice = melody {
\\time 3/4
\\key c \\major
<", set$notes1,">
<", set$notes2,">
<", set$notes3,">  \\bar \"|.\"
}
\\new Lyrics \\lyricsto melody { ", set$X1, set$X2, set$X3, " }
\\new Staff {
\\key c \\major
\\clef bass
\\relative c
",set$bass1, set$bass2, set$bass3,"
}"), collapse = "\n")
main1 <- paste("
% LilyBin
\\version \"2.18.2\"
\\paper {
system-system-spacing = #'((padding . 20))
}
", smallScore, "
>>
\\layout {
line-width=4\\cm indent=1\\cm
}
")
main2 <- "
\\markup{\"1\"\\line{\\null}}
\\markup{\\concat { \\smallScoreA \\smallScoreB \\smallScoreC \\smallScoreD }}
\\markup{\"2\"\\line{\\null}}
\\markup{\\concat { \\smallScoreE \\smallScoreF \\smallScoreG \\smallScoreH}}
\\markup{\"3\"\\line{\\null}}
\\markup{\\concat { \\smallScoreI \\smallScoreJ \\smallScoreK \\smallScoreL}}
\\markup{\"4\"\\line{\\null}}
\\markup{\\concat { \\smallScoreM \\smallScoreN \\smallScoreO \\smallScoreP}}
"
writeLines(c(main1, main2), "J:/Documents_CD/Tom/Cadences/output.ly")
n <- 16
scores <- paste0("smallScore", LETTERS[1:n])
tmp <- lapply(split(cadences, cadences$cadence), function(x) expand.grid(split(x$nmChord, x$nChord)))
allCadences <- data.frame(cadence = rep(names(tmp), sapply(tmp, nrow)), do.call(rbind, tmp))
rownames(allCadences) <- NULL
head(allCadences)
allCadences$notes1 <- chords$notes[match(allCadences$X1, chords$nmChord)]
allCadences$notes2 <- chords$notes[match(allCadences$X2, chords$nmChord)]
allCadences$notes3 <- chords$notes[match(allCadences$X3, chords$nmChord)]
allCadences$bass1 <- chords$bass[match(allCadences$X1, chords$nmChord)]
allCadences$bass2 <- chords$bass[match(allCadences$X2, chords$nmChord)]
allCadences$bass3 <- chords$bass[match(allCadences$X3, chords$nmChord)]
head(allCadences)
set.seed(999)
set <- allCadences[sample(1:nrow(allCadences), size = length(scores)),]
set$key <- keys[sample(1:length(keys), size = length(scores))]
set$score <- scores
set$key <- keys[sample(1:length(keys), size = length(scores), replace = T)]
set$score <- scores
head(set)
smallScore <- paste(paste(set$score, "= \\markup{
\\score{
\\transpose c", set$key, "
\\new StaffGroup <<
\\new Staff \\new Voice = melody {
\\time 3/4
\\key c \\major
<", set$notes1,">
<", set$notes2,">
<", set$notes3,">  \\bar \"|.\"
}
\\new Lyrics \\lyricsto melody { ", set$X1, set$X2, set$X3, " }
\\new Staff {
\\key c \\major
\\clef bass
\\relative c
",set$bass1, set$bass2, set$bass3,"
}
>>
\\layout {
line-width=4\\cm indent=1\\cm
}
"), collapse = "\n")
main1 <- paste("
% LilyBin
\\version \"2.18.2\"
\\paper {
system-system-spacing = #'((padding . 20))
}
", smallScore)
main2 <- "
\\markup{\"1\"\\line{\\null}}
\\markup{\\concat { \\smallScoreA \\smallScoreB \\smallScoreC \\smallScoreD }}
\\markup{\"2\"\\line{\\null}}
\\markup{\\concat { \\smallScoreE \\smallScoreF \\smallScoreG \\smallScoreH}}
\\markup{\"3\"\\line{\\null}}
\\markup{\\concat { \\smallScoreI \\smallScoreJ \\smallScoreK \\smallScoreL}}
\\markup{\"4\"\\line{\\null}}
\\markup{\\concat { \\smallScoreM \\smallScoreN \\smallScoreO \\smallScoreP}}
"
writeLines(c(main1, main2), "J:/Documents_CD/Tom/Cadences/output.ly")
chords
chords <- read.table("clipboard", sep = "\t", head= T, quote = "")
allCadences <- data.frame(cadence = rep(names(tmp), sapply(tmp, nrow)), do.call(rbind, tmp))
rownames(allCadences) <- NULL
head(allCadences)
allCadences$notes1 <- chords$notes[match(allCadences$X1, chords$nmChord)]
allCadences$notes2 <- chords$notes[match(allCadences$X2, chords$nmChord)]
allCadences$notes3 <- chords$notes[match(allCadences$X3, chords$nmChord)]
allCadences$bass1 <- chords$bass[match(allCadences$X1, chords$nmChord)]
allCadences$bass2 <- chords$bass[match(allCadences$X2, chords$nmChord)]
allCadences$bass3 <- chords$bass[match(allCadences$X3, chords$nmChord)]
head(allCadences)
set.seed(999)
set <- allCadences[sample(1:nrow(allCadences), size = length(scores)),]
set$key <- keys[sample(1:length(keys), size = length(scores), replace = T)]
set$score <- scores
head(set)
smallScore <- paste(paste(set$score, "= \\markup{
\\score{
\\transpose c", set$key, "
\\new StaffGroup <<
\\new Staff \\new Voice = melody {
\\time 3/4
\\key c \\major
<", set$notes1,">
<", set$notes2,">
<", set$notes3,">  \\bar \"|.\"
}
\\new Lyrics \\lyricsto melody { ", set$X1, set$X2, set$X3, " }
\\new Staff {
\\key c \\major
\\clef bass
\\relative c
",set$bass1, set$bass2, set$bass3,"
}
>>
\\layout {
line-width=4\\cm indent=1\\cm
}
"), collapse = "\n")
main1 <- paste("
% LilyBin
\\version \"2.18.2\"
\\paper {
system-system-spacing = #'((padding . 20))
}
", smallScore)
main2 <- "
\\markup{\"1\"\\line{\\null}}
\\markup{\\concat { \\smallScoreA \\smallScoreB \\smallScoreC \\smallScoreD }}
\\markup{\"2\"\\line{\\null}}
\\markup{\\concat { \\smallScoreE \\smallScoreF \\smallScoreG \\smallScoreH}}
\\markup{\"3\"\\line{\\null}}
\\markup{\\concat { \\smallScoreI \\smallScoreJ \\smallScoreK \\smallScoreL}}
\\markup{\"4\"\\line{\\null}}
\\markup{\\concat { \\smallScoreM \\smallScoreN \\smallScoreO \\smallScoreP}}
"
writeLines(c(main1, main2), "J:/Documents_CD/Tom/Cadences/output.ly")
set
chords
tmp <- lapply(split(cadences, cadences$cadence), function(x) expand.grid(split(x$nmChord, x$nChord)))
allCadences <- data.frame(cadence = rep(names(tmp), sapply(tmp, nrow)), do.call(rbind, tmp))
rownames(allCadences) <- NULL
head(allCadences)
allCadences$notes1 <- chords$notes[match(allCadences$X1, chords$nmChord)]
allCadences$notes2 <- chords$notes[match(allCadences$X2, chords$nmChord)]
allCadences$notes3 <- chords$notes[match(allCadences$X3, chords$nmChord)]
allCadences$bass1 <- chords$bass[match(allCadences$X1, chords$nmChord)]
allCadences$bass2 <- chords$bass[match(allCadences$X2, chords$nmChord)]
allCadences$bass3 <- chords$bass[match(allCadences$X3, chords$nmChord)]
head(allCadences)
set.seed(999)
set <- allCadences[sample(1:nrow(allCadences), size = length(scores)),]
set$key <- keys[sample(1:length(keys), size = length(scores), replace = T)]
set$score <- scores
head(set)
set
cadences <- read.table("clipboard", sep = "\t", head= T, quote = "")
scores <- paste0("smallScore", LETTERS[1:n])
tmp <- lapply(split(cadences, cadences$cadence), function(x) expand.grid(split(x$nmChord, x$nChord)))
allCadences <- data.frame(cadence = rep(names(tmp), sapply(tmp, nrow)), do.call(rbind, tmp))
rownames(allCadences) <- NULL
head(allCadences)
allCadences$notes1 <- chords$notes[match(allCadences$X1, chords$nmChord)]
allCadences$notes2 <- chords$notes[match(allCadences$X2, chords$nmChord)]
allCadences$notes3 <- chords$notes[match(allCadences$X3, chords$nmChord)]
allCadences$bass1 <- chords$bass[match(allCadences$X1, chords$nmChord)]
allCadences$bass2 <- chords$bass[match(allCadences$X2, chords$nmChord)]
allCadences$bass3 <- chords$bass[match(allCadences$X3, chords$nmChord)]
head(allCadences)
set.seed(999)
set <- allCadences[sample(1:nrow(allCadences), size = length(scores)),]
set$key <- keys[sample(1:length(keys), size = length(scores), replace = T)]
set$score <- scores
head(set)
set
smallScore <- paste(paste(set$score, "= \\markup{
\\score{
\\transpose c", set$key, "
\\new StaffGroup <<
\\new Staff \\new Voice = melody {
\\time 3/4
\\key c \\major
<", set$notes1,">
<", set$notes2,">
<", set$notes3,">  \\bar \"|.\"
}
\\new Lyrics \\lyricsto melody { ", set$X1, set$X2, set$X3, " }
\\new Staff {
\\key c \\major
\\clef bass
\\relative c
",set$bass1, set$bass2, set$bass3,"
}
>>
\\layout {
line-width=4\\cm indent=1\\cm
}
"), collapse = "\n")
main1 <- paste("
% LilyBin
\\version \"2.18.2\"
\\paper {
system-system-spacing = #'((padding . 20))
}
", smallScore)
main2 <- "
\\markup{\"1\"\\line{\\null}}
\\markup{\\concat { \\smallScoreA \\smallScoreB \\smallScoreC \\smallScoreD }}
\\markup{\"2\"\\line{\\null}}
\\markup{\\concat { \\smallScoreE \\smallScoreF \\smallScoreG \\smallScoreH}}
\\markup{\"3\"\\line{\\null}}
\\markup{\\concat { \\smallScoreI \\smallScoreJ \\smallScoreK \\smallScoreL}}
\\markup{\"4\"\\line{\\null}}
\\markup{\\concat { \\smallScoreM \\smallScoreN \\smallScoreO \\smallScoreP}}
"
writeLines(c(main1, main2), "J:/Documents_CD/Tom/Cadences/output.ly")
